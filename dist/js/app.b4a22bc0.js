(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)o=r[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0216":function(t,e,s){"use strict";var a=s("b9c9"),n=s.n(a);n.a},"080e":function(t,e,s){},1001:function(t,e,s){"use strict";var a=s("10be"),n=s.n(a);n.a},"10be":function(t,e,s){},"14fc":function(t,e,s){"use strict";var a=s("4696"),n=s.n(a);n.a},"1b13":function(t,e,s){},"28ef":function(t,e,s){"use strict";var a=s("9869"),n=s.n(a);n.a},"2a97":function(t,e,s){"use strict";var a=s("bddb"),n=s.n(a);n.a},"2e3d":function(t,e,s){"use strict";var a=s("e204"),n=s.n(a);n.a},3041:function(t,e,s){"use strict";var a=s("b3f8"),n=s.n(a);n.a},"42fb":function(t,e,s){},4696:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"},on:{touchmove:function(t){t.preventDefault()}}},[s("v-header",{attrs:{seller:t.seller}}),s("div",{staticClass:"tab-wrapper"},[s("tab",{attrs:{tabs:t.tabs}})],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header",on:{click:t.showDetail}},[s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"brand"}),s("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),s("div",{staticClass:"description"},[t._v("\n        "+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n      ")]),t.seller.supports?s("div",{staticClass:"support"},[s("support-ico",{attrs:{size:1,type:t.seller.supports[0].type}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()]),t.seller.supports?s("div",{staticClass:"support-count"},[s("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),s("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),s("div",{staticClass:"bulletin-wrapper"},[s("span",{staticClass:"bulletin-title"}),s("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),s("i",{staticClass:"icon-keyboard_arrow_right"})]),s("div",{staticClass:"background"},[s("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})])])},r=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"support-ico",class:t.iconCls})},c=[],u=(s("c5f6"),{name:"support-ico",props:{size:{type:Number},type:{type:Number}},computed:{iconCls:function(){var t=["decrease","discount","special","invoice","guarantee"];return"icon-".concat(this.size," ").concat(t[this.type])}}}),d=u,p=(s("cba5"),s("2877")),f=Object(p["a"])(d,l,c,!1,null,"3e101e83",null);f.options.__file="support-ico.vue";var h=f.exports,v={name:"v-header",props:{seller:{type:Object,default:function(){return{}}}},methods:{showDetail:function(){this.headerDetailComp=this.headerDetailComp||this.$createHeaderDetail({$props:{seller:"seller"}}),this.headerDetailComp.show()}},components:{SupportIco:h}},b=v,m=(s("a734"),Object(p["a"])(b,o,r,!1,null,null,null));m.options.__file="v-header.vue";var _=m.exports,C=s("bc3a"),g=s.n(C),y=0;function w(t){return function(e){return g.a.get(t,{params:e}).then(function(t){var e=t.data,s=e.data,a=e.errno;if(a===y)return s}).catch(function(){console.log("server error")})}}var x=w("api/seller"),P=w("/api/goods"),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("cube-tab-bar",{ref:"tabBar",staticClass:"border-bottom-1px",attrs:{showSlider:!0,useTransition:!1,data:t.tabs},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}}),s("div",{staticClass:"slide-wrapper"},[s("cube-slide",{ref:"slide",attrs:{loop:!1,"auto-play":!1,"show-dots":!1,"initial-index":t.index,options:t.slideOptions},on:{change:t.onChange,scroll:t.onScroll}},t._l(t.tabs,function(t,e){return s("cube-slide-item",{key:e},[s(t.component,{ref:"component",refInFor:!0,tag:"component",attrs:{data:t.data}})],1)}))],1)],1)},k=[],j=(s("20d6"),{name:"tab",props:{tabs:{type:Array,default:function(){return[]}},initialIndex:{type:Number,default:0}},data:function(){return{index:this.initialIndex,slideOptions:{listenScroll:!0,probeType:3,directionLockThreshold:0}}},mounted:function(){this.onChange(this.index)},methods:{onChange:function(t){this.index=t;var e=this.$refs.component[t];e.fetch&&e.fetch()},onScroll:function(t){var e=t.x,s=this.$refs.tabBar,a=s.$el.clientWidth,n=this.$refs.slide.slide.scrollerWidth,i=-e/n*a;s.setSliderTransform(i)}},computed:{selectedLabel:{get:function(){return this.tabs[this.index].label},set:function(t){this.index=this.tabs.findIndex(function(e){return e.label===t})}}}}),$=j,S=(s("2a97"),Object(p["a"])($,O,k,!1,null,"6d482ecb",null));S.options.__file="tab.vue";var E=S.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("div",{staticClass:"scroll-nav-wrapper"},[t.goods.length?s("cube-scroll-nav",{attrs:{side:!0,data:t.goods,options:t.scrollOptions}},t._l(t.goods,function(e){return s("cube-scroll-nav-panel",{key:e.name,attrs:{label:e.name,title:e.name}},[s("ul",t._l(e.foods,function(e){return s("li",{key:e.name,staticClass:"food-item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"57",height:"57",src:e.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v("\n             "+t._s(e.name)+"\n           ")]),s("p",{staticClass:"desc"},[t._v(t._s(e.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("\n               月售"+t._s(e.sellCount)+"份\n             ")]),s("span",[t._v("\n               好评率"+t._s(e.rating)+"%\n             ")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("\n               ￥"+t._s(e.price)+"\n             ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("\n               ￥"+t._s(e.oldPrice)+"\n             ")])])]),s("div",{staticClass:"cart-control-wrapper"},[s("cart-control",{attrs:{food:e},on:{add:t.onAdd}})],1)])}))])})):t._e()],1),s("div",{staticClass:"shop-cart-wrapper"},[s("shop-cart",{ref:"shopCart",attrs:{"select-foods":t.selectFoods,"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice}})],1)])},T=[],D=s("2909"),B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[s("bubble",{attrs:{num:t.totalCount}})],1)]),s("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right",on:{click:t.pay}},[s("div",{staticClass:"pay",class:t.payClass},[t._v("\n          "+t._s(t.payDesc)+"\n        ")])])]),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e,a){return s("div",{key:a},[s("transition",{on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)}))])])},L=[],F=(s("ac6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"bubble"},[t._v("\n  "+t._s(t.num)+"\n")])}),z=[],I={name:"bubble",props:{num:{type:Number}}},M=I,A=(s("77c2"),Object(p["a"])(M,F,z,!1,null,"5090da6c",null));A.options.__file="bubble.vue";var H=A.exports,G=10,J="inner-hook";function W(){for(var t=[],e=0;e<G;e++)t.push({show:!1});return t}var R={name:"shop-cart",props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},sticky:{type:Boolean,default:!1},fold:{type:Boolean,default:!0}},data:function(){return{balls:W(),listFold:this.fold}},created:function(){this.dropBalls=[]},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.price*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥".concat(this.minPrice,"元起送");if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥".concat(t,"元起送")}return"去结算"},payClass:function(){return!this.totalCount||this.totalPrice<this.minPrice?"not-enough":"enough"}},methods:{toggleList:function(){if(this.listFold){if(!this.totalCount)return;this.listFold=!1,this._showShopCartList(),this._showShopCartSticky()}else this.listFold=!0,this._hideShopCartList()},pay:function(t){this.totalPrice<this.minPrice||(this.$createDialog({title:"支付",content:"您需要支付".concat(this.totalPrice,"元")}).show(),t.stopPropagation())},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){var e=this.dropBalls[this.dropBalls.length-1],s=e.el.getBoundingClientRect(),a=s.left-32,n=-(window.innerHeight-s.top-22);t.style.display="",t.style.transform=t.style.webkitTransform="translate3d(0,".concat(n,"px,0)");var i=t.getElementsByClassName(J)[0];i.style.transform=i.style.webkitTransform="translate3d(".concat(a,"px,0,0)")},dropping:function(t,e){this._reflow=document.body.offsetHeight,t.style.transform=t.style.webkitTransform="translate3d(0,0,0)";var s=t.getElementsByClassName(J)[0];s.style.transform=s.style.webkitTransform="translate3d(0,0,0)",t.addEventListener("transitionend",e)},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}},watch:{fold:function(t){this.listFold=t},totalCount:function(t){this.fold||0!==t||this._hideShopCartList()}},components:{Bubble:H}},V=R,q=(s("2e3d"),Object(p["a"])(V,B,L,!1,null,"bae9f380",null));q.options.__file="shop-cart.vue";var K=q.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",on:{click:function(e){return e.stopPropagation(),t.decrease(e)}}},[s("span",{staticClass:"inner icon-remove_circle_outline"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("div",{staticClass:"cart-add icon-add_circle",on:{click:function(e){return e.stopPropagation(),t.add(e)}}})],1)},U=[],X="add",Y={name:"cart-control",props:{food:{type:Object}},methods:{add:function(t){this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit(X,t.target)},decrease:function(){this.food.count&&this.food.count--}}},Z=Y,tt=(s("28ef"),Object(p["a"])(Z,Q,U,!1,null,"6a136f70",null));tt.options.__file="cart-control.vue";var et=tt.exports,st={name:"goods",props:{data:{type:Object,default:function(){}}},data:function(){return{goods:[],scrollOptions:{click:!1,directionLockThreshold:0}}},methods:{fetch:function(){var t=this;P().then(function(e){t.goods=e})},onAdd:function(t){this.$refs.shopCart.drop(t)}},computed:{seller:function(){return this.data.seller},selectFoods:function(){return this.goods.reduce(function(t,e){return t.push.apply(t,Object(D["a"])(e.foods)),t},[]).filter(function(t){return t.count>0})}},components:{ShopCart:K,CartControl:et}},at=st,nt=(s("14fc"),Object(p["a"])(at,N,T,!1,null,"fc9aaa38",null));nt.options.__file="goods.vue";var it=nt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[t._v("\n  ratings\n")])},rt=[],lt={data:function(){return{}},components:{}},ct=lt,ut=(s("0216"),Object(p["a"])(ct,ot,rt,!1,null,"7566f130",null));ut.options.__file="ratings.vue";var dt=ut.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[t._v("\n seller\n")])},ft=[],ht={data:function(){return{}},components:{}},vt=ht,bt=(s("3041"),Object(p["a"])(vt,pt,ft,!1,null,"31c427f5",null));bt.options.__file="seller.vue";var mt=bt.exports,_t={name:"app",created:function(){this._getSeller(),this._getGoods()},data:function(){return{seller:{},goods:{},ratings:{}}},methods:{_getSeller:function(){var t=this;x().then(function(e){t.seller=e})},_getGoods:function(){var t=this;P().then(function(e){t.goods=e})}},computed:{tabs:function(){return[{label:"商品",component:it,data:{seller:this.seller}},{label:"评价",component:dt,data:{seller:this.seller}},{label:"商家",component:mt,data:{seller:this.seller}}]}},components:{VHeader:_,Tab:E}},Ct=_t,gt=(s("a635"),Object(p["a"])(Ct,n,i,!1,null,"8c755a6c",null));gt.options.__file="App.vue";var yt=gt.exports,wt=(s("df49"),s("e7bd")),xt=s("0c29"),Pt=s("cd5d"),Ot=s("6f24"),kt=s("2696"),jt=s("7c8a"),$t=s("ae0c"),St=s("47fe"),Et=s("1cf7"),Nt=s("7add"),Tt=s("84d6"),Dt=s("d2c1"),Bt=s("291f"),Lt=s("7ced"),Ft=s("09ad"),zt=s("81c3"),It=s("6fe1"),Mt=s("a801"),At=s("031d"),Ht=s("63b4"),Gt=s("9173"),Jt=s("8344"),Wt=s("664d"),Rt=s("0124"),Vt=s("9736"),qt=s("1cc1"),Kt=s("e231"),Qt=s("aea1"),Ut=s("5f4e"),Xt=s("0679"),Yt=s("2799"),Zt=s("bdd9"),te=s("a2d2"),ee=s("ba90"),se=s("36b6"),ae=s("0f85");a["a"].use(wt["a"]),a["a"].use(xt["a"]),a["a"].use(Pt["a"]),a["a"].use(Ot["a"]),a["a"].use(kt["a"]),a["a"].use(jt["a"]),a["a"].use($t["a"]),a["a"].use(St["a"]),a["a"].use(Et["a"]),a["a"].use(Nt["a"]),a["a"].use(Tt["a"]),a["a"].use(Dt["a"]),a["a"].use(Bt["a"]),a["a"].use(Lt["a"]),a["a"].use(Ft["a"]),a["a"].use(zt["a"]),a["a"].use(It["a"]),a["a"].use(Mt["a"]),a["a"].use(At["a"]),a["a"].use(Ht["a"]),a["a"].use(Gt["a"]),a["a"].use(Jt["a"]),a["a"].use(Wt["a"]),a["a"].use(Rt["a"]),a["a"].use(Vt["a"]),a["a"].use(qt["a"]),a["a"].use(Kt["a"]),a["a"].use(Qt["a"]),a["a"].use(Ut["a"]),a["a"].use(Xt["a"]),a["a"].use(Yt["a"]),a["a"].use(Zt["a"]),a["a"].use(te["a"]),a["a"].use(ee["a"]),a["a"].use(se["a"]),a["a"].use(ae["a"]);var ne=s("df9a"),ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"header-detail",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[s("div",{staticClass:"detail-wrapper clear-fix"},[s("div",{staticClass:"detail-main"},[s("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),s("div",{staticClass:"star-wrapper"},[s("star",{attrs:{size:48,score:t.seller.score}})],1),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("优惠信息")]),s("div",{staticClass:"line"})]),t.seller.supports?s("ul",{staticClass:"supports"},t._l(t.seller.supports,function(e,a){return s("li",{key:e.id,staticClass:"support-item"},[s("support-ico",{attrs:{size:2,type:t.seller.supports[a].type}}),s("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[a].description))])],1)})):t._e(),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("商家公告")]),s("div",{staticClass:"line"})]),s("div",{staticClass:"bulletin"},[s("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])])])]),s("div",{staticClass:"detail-close",on:{click:t.hide}},[s("i",{staticClass:"icon-close"})])])])},oe=[],re="show",le="hide",ce={data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0,this.$emit(re)},hide:function(){this.visible=!1,this.$emit(le)}}},ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"star",class:t.starType},t._l(t.itemClasses,function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})}))},de=[],pe=5,fe="on",he="half",ve="off",be={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,s=e%1!==0,a=Math.floor(e),n=0;n<a;n++)t.push(fe);s&&t.push(he);while(t.length<pe)t.push(ve);return t}}},me=be,_e=(s("5717"),Object(p["a"])(me,ue,de,!1,null,null,null));_e.options.__file="star.vue";var Ce=_e.exports,ge={name:"header-detail",mixins:[ce],props:{seller:{type:Object,default:function(){return{}}}},components:{SupportIco:h,Star:Ce}},ye=ge,we=(s("1001"),Object(p["a"])(ye,ie,oe,!1,null,"b44ce350",null));we.options.__file="header-detail.vue";var xe=we.exports;Object(ne["a"])(a["a"],xe);s("f867");a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(yt)}}).$mount("#app")},5717:function(t,e,s){"use strict";var a=s("080e"),n=s.n(a);n.a},"77c2":function(t,e,s){"use strict";var a=s("ee26"),n=s.n(a);n.a},9869:function(t,e,s){},a635:function(t,e,s){"use strict";var a=s("1b13"),n=s.n(a);n.a},a734:function(t,e,s){"use strict";var a=s("42fb"),n=s.n(a);n.a},b3f8:function(t,e,s){},b9c9:function(t,e,s){},bddb:function(t,e,s){},be42:function(t,e,s){},cba5:function(t,e,s){"use strict";var a=s("be42"),n=s.n(a);n.a},e204:function(t,e,s){},ee26:function(t,e,s){},f867:function(t,e,s){}});
//# sourceMappingURL=app.b4a22bc0.js.map